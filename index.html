<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body onload="renderTime();">
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="clockDisplay" class="lead"></p>
    </header>

    <div class="container time-block">
      <!-- Timeblocks go here -->
      <div id="7" class="row">
        <div class="col-2 hour">07:00AM</div>
        <textarea id="textarea07" class="col" placeholder="Add things to do here..."></textarea>
        <button class="col-2 saveBtn" type="submit">Save</button>
      </div>
      <div id="8" class="row">
        <div class="col-2 hour">08:00AM</div>
        <textarea id="textarea08" class="col" placeholder="Add things to do here..."></textarea>
        <button class="col-2 saveBtn" type="submit">Save</button>
      </div>
      <div id="9" class="row">
        <div class="col-2 hour">09:00AM</div>
        <textarea id="textarea09" class="col" placeholder="Add things to do here..."></textarea>
        <button class="col-2 saveBtn" type="submit">Save</button>
      </div>
      <div id="10" class="row">
        <div class="col-2 hour">10:00AM</div>
        <textarea id="textarea10" class="col" placeholder="Add things to do here..."></textarea>
        <button class="col-2 saveBtn" type="submit">Save</button>
      </div>
      <div id="11" class="row">
        <div class="col-2 hour">11:00AM</div>
        <textarea id="textarea11" class="col" placeholder="Add things to do here..."></textarea>
        <button class="col-2 saveBtn" type="submit">Save</button>
      </div>
      <div id="12" class="row">
        <div class="col-2 hour">12:00PM</div>
        <textarea id="textarea12" class="col" placeholder="Add things to do here..."></textarea>
        <button class="col-2 saveBtn" type="submit">Save</button>
      </div>
      <div id="13" class="row">
        <div class="col-2 hour">01:00PM</div>
        <textarea id="textarea01" class="col" placeholder="Add things to do here..."></textarea>
        <button class="col-2 saveBtn" type="submit">Save</button>
      </div>
      <div id="14" class="row">
        <div class="col-2 hour">02:00PM</div>
        <textarea id="textarea02" class="col" placeholder="Add things to do here..."></textarea>
        <button class="col-2 saveBtn" type="submit">Save</button>
      </div>
    

      <hr>

      <footer class="footer">&#169Copyright 2020</footer>
      
      <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
      <script>
      function renderTime() {
          //Date
          var mydate = new Date();
          var year = mydate.getYear();
              if(year < 1000){
                  year +=1900
              }
          var day = mydate.getDay();
          var month = mydate.getMonth();
          var daym = mydate.getDate();
          var dayarray = new Array("Sunday,","Monday,","Tuesday,","Wednesday,","Thursday,","Friday,","Saturday,");
          var montharray = new Array("January","Febuary","March","April","May","June","July","August","September","October","November","December");
          //Date End

          //Time
          var currentTime = new Date();
          var h = currentTime.getHours();
          var m = currentTime.getMinutes();
          var s = currentTime.getSeconds();
              if(h == 24){
                  h = 0;
              } else if(h > 12){
                  h = h - 0;
              }

              if(h < 10){
                  h = "0" + h;
              }

              if(m < 10){
                  m = "0" + m;
              }

              if(s < 10){
                  s = "0" + s;
              }
              
          var myClock = document.getElementById("clockDisplay");
          myClock.textContent = "" +dayarray[day] + " " +daym+ " " +montharray[month]+ " " +year+ " | " +h+ ":" +m+ ":" +s;
          myClock.innerText = "" +dayarray[day] + " " +daym+ " " +montharray[month]+ " " +year+ " | " +h+ ":" +m+ ":" +s;

          setTimeout("renderTime()", 1000); 
          
        }
        renderTime();

        //$(document).ready(function(){


        let currentHour = moment().format("HH");

        var hourLabel07 = $("#textarea07").parent().attr("id");
        var hourLabel08 = $("#textarea08").parent().attr("id");
        var hourLabel09 = $("#textarea09").parent().attr("id");
        var hourLabel10 = $("#textarea10").parent().attr("id");
        var hourLabel11 = $("#textarea11").parent().attr("id");
        var hourLabel12 = $("#textarea12").parent().attr("id");
        var hourLabel13 = $("#textarea01").parent().attr("id");
        var hourLabel14 = $("#textarea02").parent().attr("id");


        for(var i = 7;i<=14;i++){
          var hourLabelId = "#textarea" + i;
          var hourLabel = $(`#${i}`).attr("id");
          console.log(hourLabel);
          console.log(currentHour);
          if(parseInt(hourLabel) < parseInt(currentHour)){
            $(`#${i}`).addClass("past");
          }else if(parseInt(hourLabel) > parseInt(currentHour)){
            $(`#${i}`).addClass("future");
          }else{
            $(`#${i}`).addClass("present");
          }
        }
        // for(var i = 10;i<=12;i++){
        //   var hourLabelId = "#textarea" + i;
        //   var hourLabel = $(hourLabelId).parent().attr("id"); 
        //   if(parseInt(hourLabel) < parseInt(currentHour)){
        //     $(hourLabelId).parent().addClass("past");
        //   }else if(parseInt(hourLabel) > parseInt(currentHour)){
        //     $(hourLabelId).parent().addClass("future");
        //   }else{
        //     $(hourLabelId).parent().addClass("present");
        //   }
        // }
        // for(var i = 1;i<=2;i++){
        //   var hourLabelId = "#textarea0" + i;
        //   var hourLabel = $(hourLabelId).parent().attr("id");
        //   console.log(hourLabel);
        //   console.log(currentHour);
        //   if(parseInt(hourLabel) < parseInt(currentHour)){
        //     $(hourLabelId).parent().addClass("past");
        //     console.log("past");
        //   }else if(parseInt(hourLabel) > parseInt(currentHour)){
        //     $(hourLabelId).parent().addClass("future");
        //     console.log("future");
        //   }else{
        //     $(hourLabelId).parent().addClass("present");
        //     console.log("present");
        //   }
        // }
          

          

        var hourLabel = $("textarea").parent().attr("id");

        $("#7 #textarea07").val(localStorage.getItem("7"));
        $("#8 #textarea08").val(localStorage.getItem("8"));
        $("#9 #textarea09").val(localStorage.getItem("9"));
        $("#10 #textarea10").val(localStorage.getItem("10"));
        $("#11 #textarea11").val(localStorage.getItem("11"));
        $("#12 #textarea12").val(localStorage.getItem("12"));
        $("#13 #textarea01").val(localStorage.getItem("13"));
        $("#14 #textarea02").val(localStorage.getItem("14"));
 

        $(".saveBtn").on("click", function (e) {
            e.preventDefault();
            var textArea = $(this).siblings("textarea").val();
            console.log(textArea);
            var hour= $(this).parent().attr("id");
            console.log(hour);
            localStorage.setItem(hour, textArea);

        })

        var type = $(".container").children().children("textarea");
        console.log(type);
        console.log(this);
    

      </script>
   
  </body>
</html>
